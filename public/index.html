<!DOCTYPE html>
<html>
<head>
    <title>Kalender</title>
    <script id="transformResult"></script>
    <link rel="stylesheet" href="css/stylesheet.css" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="js/calTest.js"></script>
    <script language="javascript" type="text/javascript" src="res/xsltjs/xslt.js"></script>
    <script>

	if (window.location.protocol != "https:") {
   		window.location.href = "https:" + window.location.href.substring(window.location.protocol.length);
	}

        var socket = io();

        window.fbAsyncInit = function () {
            FB.init({
                appId: '1450240011943953',
                xfbml: true,
                version: 'v2.3'
            });

            FB.getLoginStatus(function (response) {
                statusChangeCallback(response);
            });
        };

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));

        function statusChangeCallback(response) {
            if (response.status === 'connected') {
                FB.api('/me', function (response) {
                    console.log(JSON.stringify(response));
                    socket.emit("login", response);
                    $('#loginarea').fadeOut(300, function () {
                        $('main').fadeIn(300);
                    });
                });
            } else if (response.status === 'not_authorized') {
            } else {
            }
        }

        $(document).ready(function () {
            $('#login').click(function () {
                FB.login(function (response) {
                    statusChangeCallback(response);
                });
            });
        });

        socket.on("data", function (xmlStr) {
            new Transformation().setXml(xmlStr)
                    .setXslt("res/CalTest.xsl").transform("transformResult");
        });


    </script>


</head>
<body>
<div id="loginarea" class="center">
    Please login with Facebook
    <div id="login"><i class="fa fa-facebook"></i> Login</div>
</div>
<main>
    <div id="menudiv">
        <nav><i class="fa fa-bars"></i></nav>
        <div class="center"><h2 id="header">Monat, Jahr</h2></div>
        <div id="appointment" class="button"><span class="btn">Neuer Termin</span></div>
        <div id="today" class="button"><span class="btn" id="todayText">Heute</span></div>
        <div id="change" class="button"><span class="btn" id="changeText">Wochenansicht</span></div>
    </div>
    <div id="menu"></div>
    <div id="overlay"></div>
    <div id="tablediv">
        <div id="monthTable" class="center">
            <div class="dayview_back"></div>
        </div>
        <div id="prev"><span class="btn" id="prevText"><i class="fa fa-angle-double-left"></i></span></div>
        <div id="next"><span class="btn" id="nextText"><i class="fa fa-angle-double-right"></i></span></div>
        <div id="weekTable" class="center">
            <div class="dayview_back"></div>
        </div>
        <div id="dayview" class="center">
            <div id="day_header">
                <div class="center" id="header_text">Montag, 15.06.2015</div>
                <div id="dayview_close"><i class="fa fa-minus-square-o"></i></div>
            </div>
            <div id="inputarea_dayView"></div>
        </div>
        <div id="appointmentform" class="center">
            <div id="form_header">
                <div class="center">Neuen Termin hinzuf&uuml;gen</div>
                <div id="appointment_close"><i class="fa fa-minus-square-o"></i></div>
            </div>
            <div id="inputarea">
                <div>
                    <input type="date" class="inputfields2" style="clear:left; left:15vw;"/>
                    <div class="inputfields1" style="left:15vw;"><span>Startdatum</span></div>
                    <input type="date" class="inputfields2" style="left:25vw;" />
                    <div class="inputfields1" style="left:26vw;"><span>Enddatum</span></div>
                    <input placeholder="hh:mm" class="inputfields2" style="clear:left; left:15vw;" />
                    <div class="inputfields1" style="left:15vw;margin-right: 1.1vw;"><span>Startzeit</span></div>
                    <input placeholder="hh:mm" class="inputfields2" style="left:25vw;" />
                    <div class="inputfields1" style="left:26vw;"><span>Endzeit</span></div>

                    <input type="checkbox" class="checkbox" style="clear:left; margin-right:10vw">
                    <div class="checklabel"><span>t&auml;glich</span></div>
                    <input type="checkbox" class="checkbox" style="margin-right:10vw" >
                    <div class="checklabel"><span>monatlich</span></div>
                    <input type="checkbox" class="checkbox" style="margin-right:10vw">
                    <div class="checklabel"><span>j&auml;hrlich</span></div>
                    <div id="saveapp" style="left: 10.5vw; right: 10.5vw; top:90%;" class="button"><span class="btn">Termin Speichern</span></div>
                </div>
            </div>
        </div>

    </div>
</main>
</body>
</html>
